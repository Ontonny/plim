# open https://localhost:3000/ to see the frontend
services:
  nginx:
    build: ./nginx
    ports:
      - "3000:3000"
    networks:
    - gitlab-network
    depends_on:
      - backend
  backend:
    image: ghcr.io/ontonny/plim:latest
    hostname: 'backend'
    build: .
    environment:
      ADMIN_GL_TOKEN: "glpat-TTr9G3yHut_kRxXRgLFh"
      TOKEN_SECRET: "your secret"
      RUST_BACKTRACE: 1 
    networks:
      - gitlab-network
    volumes:
      - ./config:/app/config
      - ./config.yml:/app/config.yml
  etcd:
    image: bitnami/etcd:3.5.10
    environment:
      ALLOW_NONE_AUTHENTICATION: "yes"
    ports:
      - "2379:2379"
      - "2380:2380"
    networks:
      - gitlab-network
# localhost:8080/etcdkeeper/
  etcd-ui:
    image:  evildecay/etcdkeeper:v0.7.6
    ports:
      - "8080:8080"
    networks:
      - gitlab-network
      
networks:
  gitlab-network:
    name: gitlab-network